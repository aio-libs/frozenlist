Updated the CI runs to better check for test results and to avoid deprecated syntax.
